<div class="px-4 pt-5 pb-3 text-center">
  <h3 class="display-6 fw-bold heading-white-bg">Edit Recipe</h3>
  <div class="col-lg-6 mx-auto">
      <p class="lead text-secondary">Editing recipe: "<%= post.title %>"</p>
  </div>
</div>

<div class="row justify-content-center">

  <% if(infoErrorsObj != "") { %>
    <div class="col-8 alert alert-danger" role="alert">
      <%= infoErrorsObj[0].message %>
    </div>
  <% } %>

  <div class="col-10 col-md-8 col-lg-6">

    <form class="" action="/posts/<%= post.id %>/edit" enctype="multipart/form-data" method="post">

      <div class="row g-4">

        <div class="col-12">
          <label for="title" class="form-label">Title</label>
          <input type="text" class="form-control" name="title" id="title" max="40" value="<%= post.title %>" required>
        </div>

        <div class="col-12">
          <label for="desc" class="form-label">Description</label>
          <textarea name="desc" class="form-control" rows="4" cols="30" max="200" id="desc" required><%= post.desc %></textarea>
        </div>

        <div class="col-12">
          <label for="ingredients" class="form-label">Ingredients</label><br>
          <div class="ingredientList">

              <% post.ingredients.forEach(function(ingredient, index) { %>
                <div class="ingredientDiv mb-1">
                  <input type="text" name="ingredients" class="form-control" value="<%= ingredient %>">
                </div>
              <% }); %>

          </div>
        </div>

        <div class="col-12 text-center">
          <button type="button" class="btn btn-outline-primary btn-circle form-add-btn" id="addIngredientBtn">+</button>
        </div>

        <div class="col-12">
          <label for="instructions" class="form-label">Instructions</label><br>
          <div class="instructionList">

            <% post.instructions.forEach(function(instruction, index) { %>
              <div class="instructionDiv mb-1">
                <input type="text" name="instructions" class="form-control" value="<%= instruction %>">
              </div>

            <% }); %>

          </div>
        </div>

        <div class="col-12 text-center">
          <button type="button" class="btn btn-outline-primary btn-circle form-add-btn" id="addInstructionBtn">+</button>
        </div>

        <div class="col-12">
          <label class="form-label" for="category">Category</label>
          <select class="form-select form-control" name="category" aria-label="Category" required>

            <option selected>Select a Category</option>

            <% categories.forEach(function(category, index) { %>
              <option
                <%= category.name == post.category ? 'selected' : '' %>
                value="<%= category.name %>"><%= category.name %>
              </option>
            <% });%>

          </select>
        </div>

        <div class="col-12">
          <label class="form-label" for="servings">Servings</label>
          <input type="number" name="servings" min="1" step="1" onblur="this.value = Math.round(this.value);" class="form-control" value="<%= post.servings %>" >
        </div>

        <div class="col-12">
          <label class="form-label" for="">Prep Time</label><br>
          <div class="form-group d-flex">
            <div class="d-flex align-items-center form-group input-group me-3">
              <input type="number" name="prepHours" min="0" step="1" onblur="this.value = Math.round(this.value);" class="form-control" value="<%= post.prepHours %>">
              <label class="input-group-text" for="prepHours">Hours</label>
            </div>
            <div class="d-flex align-items-center form-group input-group ms-3">
              <input type="number" name="prepMins" min="0" max="59" step="1" onblur="this.value = Math.round(this.value);" class="form-control" value="<%= post.prepMins %>">
              <label class="input-group-text" for="prepMins">Minutes</label>
            </div>
          </div>
        </div>


        <div class="col-12">
          <label class="form-label" for="">Cook Time</label><br>
          <div class="form-group d-flex">
            <div class="align-items-center form-group input-group me-3">
              <input type="number" name="cookHours" min="0" step="1" onblur="this.value = Math.round(this.value);" class="form-control" value="<%= post.cookHours %>">
              <label class="input-group-text" for="cookHours">Hours</label>
            </div>
            <div class="align-items-center form-group input-group ms-3">
              <input type="number" name="cookMins" min="0" max="59" step="1" onblur="this.value = Math.round(this.value);" class="form-control" value="<%= post.cookMins %>">
              <label class="input-group-text" for="cookMins">Minutes</label>
            </div>
          </div>
        </div>


        <div class="col-12 text-center my-5 pb-5">
          <button type="submit" class="btn btn-primary form-submit-btn" name="button">Update Recipe</button>
        </div>

      </div>

    </form>

  </div>
</div>
